!function(e){var t={path:"",defSkin:"default",format:"YYYY-MM-DD",min:"1900-01-01 00:00:00",max:"2099-12-31 23:59:59",isv:!1},n={},r=document,i="createElement",s="getElementById",o="getElementsByTagName",u=["laydate_box","laydate_void","laydate_click","LayDateSkin","skins/","laydate.css"];e.laydate=function(t){t=t||{};try{u.event=e.event?e.event:laydate.caller.arguments[0]}catch(r){}return n.run(t),laydate},laydate.v="1.1",n.getPath=function(){var e=document.scripts,n=e[e.length-1].src;return t.path?t.path:n.substring(0,n.lastIndexOf("/")+1)}(),n.use=function(e,t){var s=r[i]("link");s.type="text/css",s.rel="stylesheet",s.href=n.getPath+e+u[5],t&&(s.id=t),r[o]("head")[0].appendChild(s),s=null},n.trim=function(e){return e=e||"",e.replace(/^\s|\s$/g,"").replace(/\s+/g," ")},n.digit=function(e){return 10>e?"0"+(0|e):e},n.stopmp=function(t){return t=t||e.event,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this},n.each=function(e,t){for(var n=0,r=e.length;r>n&&t(n,e[n])!==!1;n++);},n.hasClass=function(e,t){return e=e||{},(new RegExp("\\b"+t+"\\b")).test(e.className)},n.addClass=function(e,t){return e=e||{},n.hasClass(e,t)||(e.className+=" "+t),e.className=n.trim(e.className),this},n.removeClass=function(e,t){if(e=e||{},n.hasClass(e,t)){var r=new RegExp("\\b"+t+"\\b");e.className=e.className.replace(r,"")}return this},n.removeCssAttr=function(e,t){var n=e.style;n.removeProperty?n.removeProperty(t):n.removeAttribute(t)},n.shde=function(e,t){e.style.display=t?"none":"block"},n.query=function(e){var t,i,u,a,l;return e=n.trim(e).split(" "),i=r[s](e[0].substr(1)),i?e[1]?/^\./.test(e[1])?(a=e[1].substr(1),l=new RegExp("\\b"+a+"\\b"),t=[],u=r.getElementsByClassName?i.getElementsByClassName(a):i[o]("*"),n.each(u,function(e,n){l.test(n.className)&&t.push(n)}),t[0]?t:""):(t=i[o](e[1]),t[0]?i[o](e[1]):""):i:void 0},n.on=function(t,r,i){return t.attachEvent?t.attachEvent("on"+r,function(){i.call(t,e.even)}):t.addEventListener(r,i,!1),n},n.stopMosup=function(e,t){"mouseup"!==e&&n.on(t,"mouseup",function(e){n.stopmp(e)})},n.run=function(e){var t,r,i,s=n.query,o=u.event;try{i=o.target||o.srcElement||{}}catch(a){i={}}if(t=e.elem?s(e.elem):i,o&&i.tagName){if(!t||t===n.elem)return;n.stopMosup(o.type,t),n.stopmp(o),n.view(t,e),n.reshow()}else r=e.event||"click",n.each((0|t.length)>0?t:[t],function(t,i){n.stopMosup(r,i),n.on(i,r,function(t){n.stopmp(t),i!==n.elem&&(n.view(i,e),n.reshow())})})},n.scroll=function(e){return e=e?"scrollLeft":"scrollTop",r.body[e]|r.documentElement[e]},n.winarea=function(e){return document.documentElement[e?"clientWidth":"clientHeight"]},n.isleap=function(e){return 0===e%4&&0!==e%100||0===e%400},n.checkVoid=function(e,t,r){var i=[];return e=0|e,t=0|t,r=0|r,e<n.mins[0]?i=["y"]:e>n.maxs[0]?i=["y",1]:e>=n.mins[0]&&e<=n.maxs[0]&&(e==n.mins[0]&&(t<n.mins[1]?i=["m"]:t==n.mins[1]&&r<n.mins[2]&&(i=["d"])),e==n.maxs[0]&&(t>n.maxs[1]?i=["m",1]:t==n.maxs[1]&&r>n.maxs[2]&&(i=["d",1]))),i},n.timeVoid=function(e,t){if(n.ymd[1]+1==n.mins[1]&&n.ymd[2]==n.mins[2]){if(0===t&&e<n.mins[3])return 1;if(1===t&&e<n.mins[4])return 1;if(2===t&&e<n.mins[5])return 1}else if(n.ymd[1]+1==n.maxs[1]&&n.ymd[2]==n.maxs[2]){if(0===t&&e>n.maxs[3])return 1;if(1===t&&e>n.maxs[4])return 1;if(2===t&&e>n.maxs[5])return 1}return e>(t?59:23)?1:void 0},n.check=function(){var e=n.options.format.replace(/YYYY|MM|DD|hh|mm|ss/g,"\\d+\\").replace(/\\$/g,""),t=new RegExp(e),r=n.elem[u.elemv],i=r.match(/\d+/g)||[],s=n.checkVoid(i[0],i[1],i[2]);if(""!==r.replace(/\s/g,"")){if(!t.test(r))return n.elem[u.elemv]="",n.msg("日期不符合格式，请重新选择。"),1;if(s[0])return n.elem[u.elemv]="",n.msg("日期不在有效期内，请重新选择。"),1;s.value=n.elem[u.elemv].match(t).join(),i=s.value.match(/\d+/g),i[1]<1?(i[1]=1,s.auto=1):i[1]>12?(i[1]=12,s.auto=1):i[1].length<2&&(s.auto=1),i[2]<1?(i[2]=1,s.auto=1):i[2]>n.months[(0|i[1])-1]?(i[2]=31,s.auto=1):i[2].length<2&&(s.auto=1),i.length>3&&(n.timeVoid(i[3],0)&&(s.auto=1),n.timeVoid(i[4],1)&&(s.auto=1),n.timeVoid(i[5],2)&&(s.auto=1)),s.auto?n.creation([i[0],0|i[1],0|i[2]],1):s.value!==n.elem[u.elemv]&&(n.elem[u.elemv]=s.value)}},n.months=[31,null,31,30,31,30,31,31,30,31,30,31],n.viewDate=function(e,t,r){var i=(n.query,{}),s=new Date;e<(0|n.mins[0])&&(e=0|n.mins[0]),e>(0|n.maxs[0])&&(e=0|n.maxs[0]),s.setFullYear(e,t,r),i.ymd=[s.getFullYear(),s.getMonth(),s.getDate()],n.months[1]=n.isleap(i.ymd[0])?29:28,s.setFullYear(i.ymd[0],i.ymd[1],1),i.FDay=s.getDay(),i.PDay=n.months[0===t?11:t-1]-i.FDay+1,i.NDay=1,n.each(u.tds,function(e,t){var r,s=i.ymd[0],o=i.ymd[1]+1;t.className="",e<i.FDay?(t.innerHTML=r=e+i.PDay,n.addClass(t,"laydate_nothis"),1===o&&(s-=1),o=1===o?12:o-1):e>=i.FDay&&e<i.FDay+n.months[i.ymd[1]]?(t.innerHTML=r=e-i.FDay+1,e-i.FDay+1===i.ymd[2]&&(n.addClass(t,u[2]),i.thisDay=t)):(t.innerHTML=r=i.NDay++,n.addClass(t,"laydate_nothis"),12===o&&(s+=1),o=12===o?1:o+1),n.checkVoid(s,o,r)[0]&&n.addClass(t,u[1]),n.options.festival&&n.festival(t,o+"."+r),t.setAttribute("y",s),t.setAttribute("m",o),t.setAttribute("d",r),s=o=r=null}),n.valid=!n.hasClass(i.thisDay,u[1]),n.ymd=i.ymd,u.year.value=n.ymd[0]+"年",u.month.value=n.digit(n.ymd[1]+1)+"月",n.each(u.mms,function(e,t){var r=n.checkVoid(n.ymd[0],(0|t.getAttribute("m"))+1);"y"===r[0]||"m"===r[0]?n.addClass(t,u[1]):n.removeClass(t,u[1]),n.removeClass(t,u[2]),r=null}),n.addClass(u.mms[n.ymd[1]],u[2]),i.times=[0|n.inymd[3]||0,0|n.inymd[4]||0,0|n.inymd[5]||0],n.each(new Array(3),function(e){n.hmsin[e].value=n.digit(n.timeVoid(i.times[e],e)?0|n.mins[e+3]:0|i.times[e])}),n[n.valid?"removeClass":"addClass"](u.ok,u[1])},n.festival=function(e,t){var n;switch(t){case"1.1":n="元旦";break;case"3.8":n="妇女";break;case"4.5":n="清明";break;case"5.1":n="劳动";break;case"6.1":n="儿童";break;case"9.10":n="教师";break;case"10.1":n="国庆"}n&&(e.innerHTML=n),n=null},n.viewYears=function(e){var t=n.query,r="";n.each(new Array(14),function(t){r+=7===t?"<li "+(parseInt(u.year.value)===e?'class="'+u[2]+'"':"")+' y="'+e+'">'+e+"年</li>":'<li y="'+(e-7+t)+'">'+(e-7+t)+"年</li>"}),t("#laydate_ys").innerHTML=r,n.each(t("#laydate_ys li"),function(e,t){"y"===n.checkVoid(t.getAttribute("y"))[0]?n.addClass(t,u[1]):n.on(t,"click",function(e){n.stopmp(e).reshow(),n.viewDate(0|this.getAttribute("y"),n.ymd[1],n.ymd[2])})})},n.initDate=function(){var e=(n.query,new Date),t=n.elem[u.elemv].match(/\d+/g)||[];t.length<3&&(t=n.options.start.match(/\d+/g)||[],t.length<3&&(t=[e.getFullYear(),e.getMonth()+1,e.getDate()])),n.inymd=t,n.viewDate(t[0],t[1]-1,t[2])},n.iswrite=function(){var e=n.query,t={time:e("#laydate_hms")};n.shde(t.time,!n.options.istime),n.shde(u.oclear,"isclear"in n.options?!n.options.isclear:!1),n.shde(u.otoday,"istoday"in n.options?!n.options.istoday:!1),n.shde(u.ok,"issure"in n.options?!n.options.issure:!1)},n.orien=function(e,t){var r,i=n.elem.getBoundingClientRect();e.style.left=i.left+(t?0:n.scroll(1))+"px",r=i.bottom+e.offsetHeight/1.5<=n.winarea()?i.bottom-1:i.top>e.offsetHeight/1.5?i.top-e.offsetHeight+1:n.winarea()-e.offsetHeight,e.style.top=r+(t?0:n.scroll())+"px"},n.follow=function(e){n.options.fixed?(e.style.position="fixed",n.orien(e,1)):(e.style.position="absolute",n.orien(e))},n.viewtb=function(){var e,t=[],s=["日","一","二","三","四","五","六"],u={},a=r[i]("table"),f=r[i]("thead");return f.appendChild(r[i]("tr")),u.creath=function(e){var t=r[i]("th");t.innerHTML=s[e],f[o]("tr")[0].appendChild(t),t=null},n.each(new Array(6),function(r){t.push([]),e=a.insertRow(0),n.each(new Array(7),function(n){t[r][n]=0,0===r&&u.creath(n),e.insertCell(n)})}),a.insertBefore(f,a.children[0]),a.id=a.className="laydate_table",e=t=null,a.outerHTML.toLowerCase()}(),n.view=function(e,s){var o,a=n.query,f={};s=s||e,n.elem=e,n.options=s,n.options.format||(n.options.format=t.format),n.options.start=n.options.start||"",n.mm=f.mm=[n.options.min||t.min,n.options.max||t.max],n.mins=f.mm[0].match(/\d+/g),n.maxs=f.mm[1].match(/\d+/g),u.elemv=/textarea|input/.test(n.elem.tagName.toLocaleLowerCase())?"value":"innerHTML",n.box?n.shde(n.box):(o=r[i]("div"),o.id=u[0],o.className=u[0],o.style.cssText="position: absolute;",o.setAttribute("name","laydate-v"+laydate.v),o.innerHTML=f.html='<div class="laydate_top"><div class="laydate_ym laydate_y" id="laydate_YY"><a class="laydate_choose laydate_chprev laydate_tab"><cite></cite></a><input id="laydate_y" readonly><label></label><a class="laydate_choose laydate_chnext laydate_tab"><cite></cite></a><div class="laydate_yms"><a class="laydate_tab laydate_chtop"><cite></cite></a><ul id="laydate_ys"></ul><a class="laydate_tab laydate_chdown"><cite></cite></a></div></div><div class="laydate_ym laydate_m" id="laydate_MM"><a class="laydate_choose laydate_chprev laydate_tab"><cite></cite></a><input id="laydate_m" readonly><label></label><a class="laydate_choose laydate_chnext laydate_tab"><cite></cite></a><div class="laydate_yms" id="laydate_ms">'+function(){var e="";return n.each(new Array(12),function(t){e+='<span m="'+t+'">'+n.digit(t+1)+"月</span>"}),e}()+"</div>"+"</div>"+"</div>"+n.viewtb+'<div class="laydate_bottom">'+'<ul id="laydate_hms">'+'<li class="laydate_sj">时间</li>'+"<li><input readonly>:</li>"+"<li><input readonly>:</li>"+"<li><input readonly></li>"+"</ul>"+'<div class="laydate_time" id="laydate_time"></div>'+'<div class="laydate_btn">'+'<a id="laydate_clear">清空</a>'+'<a id="laydate_today">今天</a>'+'<a id="laydate_ok">确认</a>'+"</div>"+(t.isv?'<a href="http://sentsin.com/layui/laydate/" class="laydate_v" target="_blank">laydate-v'+laydate.v+"</a>":"")+"</div>",r.body.appendChild(o),n.box=a("#"+u[0]),n.events(),o=null),n.follow(n.box),s.zIndex?n.box.style.zIndex=s.zIndex:n.removeCssAttr(n.box,"z-index"),n.stopMosup("click",n.box),n.initDate(),n.iswrite(),n.check()},n.reshow=function(){return n.each(n.query("#"+u[0]+" .laydate_show"),function(e,t){n.removeClass(t,"laydate_show")}),this},n.close=function(){n.reshow(),n.shde(n.query("#"+u[0]),1),n.elem=null},n.parse=function(e,r,i){return e=e.concat(r),i=i||(n.options?n.options.format:t.format),i.replace(/YYYY|MM|DD|hh|mm|ss/g,function(){return e.index=0|++e.index,n.digit(e[e.index])})},n.creation=function(e,t){var r=(n.query,n.hmsin),i=n.parse(e,[r[0].value,r[1].value,r[2].value]);n.elem[u.elemv]=i,t||(n.close(),"function"==typeof n.options.choose&&n.options.choose(i))},n.events=function(){var t=n.query,i={box:"#"+u[0]};n.addClass(r.body,"laydate_body"),u.tds=t("#laydate_table td"),u.mms=t("#laydate_ms span"),u.year=t("#laydate_y"),u.month=t("#laydate_m"),n.each(t(i.box+" .laydate_ym"),function(e,t){n.on(t,"click",function(t){n.stopmp(t).reshow(),n.addClass(this[o]("div")[0],"laydate_show"),e||(i.YY=parseInt(u.year.value),n.viewYears(i.YY))})}),n.on(t(i.box),"click",function(){n.reshow()}),i.tabYear=function(e){0===e?n.ymd[0]--:1===e?n.ymd[0]++:2===e?i.YY-=14:i.YY+=14,2>e?(n.viewDate(n.ymd[0],n.ymd[1],n.ymd[2]),n.reshow()):n.viewYears(i.YY)},n.each(t("#laydate_YY .laydate_tab"),function(e,t){n.on(t,"click",function(t){n.stopmp(t),i.tabYear(e)})}),i.tabMonth=function(e){e?(n.ymd[1]++,12===n.ymd[1]&&(n.ymd[0]++,n.ymd[1]=0)):(n.ymd[1]--,-1===n.ymd[1]&&(n.ymd[0]--,n.ymd[1]=11)),n.viewDate(n.ymd[0],n.ymd[1],n.ymd[2])},n.each(t("#laydate_MM .laydate_tab"),function(e,t){n.on(t,"click",function(t){n.stopmp(t).reshow(),i.tabMonth(e)})}),n.each(t("#laydate_ms span"),function(e,t){n.on(t,"click",function(e){n.stopmp(e).reshow(),n.hasClass(this,u[1])||n.viewDate(n.ymd[0],0|this.getAttribute("m"),n.ymd[2])})}),n.each(t("#laydate_table td"),function(e,t){n.on(t,"click",function(e){n.hasClass(this,u[1])||(n.stopmp(e),n.creation([0|this.getAttribute("y"),0|this.getAttribute("m"),0|this.getAttribute("d")]))})}),u.oclear=t("#laydate_clear"),n.on(u.oclear,"click",function(){n.elem[u.elemv]="",n.close()}),u.otoday=t("#laydate_today"),n.on(u.otoday,"click",function(){n.elem[u.elemv]=laydate.now(0,n.options.format),n.close()}),u.ok=t("#laydate_ok"),n.on(u.ok,"click",function(){n.valid&&n.creation([n.ymd[0],n.ymd[1]+1,n.ymd[2]])}),i.times=t("#laydate_time"),n.hmsin=i.hmsin=t("#laydate_hms input"),i.hmss=["小时","分钟","秒数"],i.hmsarr=[],n.msg=function(e,r){var s='<div class="laydte_hsmtex">'+(r||"提示")+"<span>×</span></div>";"string"==typeof e?(s+="<p>"+e+"</p>",n.shde(t("#"+u[0])),n.removeClass(i.times,"laydate_time1").addClass(i.times,"laydate_msg")):(i.hmsarr[e]?s=i.hmsarr[e]:(s+='<div id="laydate_hmsno" class="laydate_hmsno">',n.each(new Array(0===e?24:60),function(e){s+="<span>"+e+"</span>"}),s+="</div>",i.hmsarr[e]=s),n.removeClass(i.times,"laydate_msg"),n[0===e?"removeClass":"addClass"](i.times,"laydate_time1")),n.addClass(i.times,"laydate_show"),i.times.innerHTML=s},i.hmson=function(e,r){var i=t("#laydate_hmsno span"),s=n.valid?null:1;n.each(i,function(t,i){s?n.addClass(i,u[1]):n.timeVoid(t,r)?n.addClass(i,u[1]):n.on(i,"click",function(){n.hasClass(this,u[1])||(e.value=n.digit(0|this.innerHTML))})}),n.addClass(i[0|e.value],"laydate_click")},n.each(i.hmsin,function(e,t){n.on(t,"click",function(t){n.stopmp(t).reshow(),n.msg(e,i.hmss[e]),i.hmson(this,e)})}),n.on(r,"mouseup",function(){var e=t("#"+u[0]);e&&"none"!==e.style.display&&(n.check()||n.close())}).on(r,"keydown",function(t){t=t||e.event;var r=t.keyCode;13===r&&n.creation([n.ymd[0],n.ymd[1]+1,n.ymd[2]])})},n.init=function(){n.skinLink=n.query("#"+u[3])}(),laydate.reset=function(){n.box&&n.elem&&n.follow(n.box)},laydate.now=function(e,t){var r=new Date(0|e?function(e){return 864e5>e?+(new Date)+864e5*e:e}(parseInt(e)):+(new Date));return n.parse([r.getFullYear(),r.getMonth()+1,r.getDate()],[r.getHours(),r.getMinutes(),r.getSeconds()],t)},laydate.skin=function(e){n.skinLink.href=n.getPath+u[4]+e+u[5]}}(window);